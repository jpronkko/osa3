(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),u=t(4),l=t(2),i=function(e){var n=e.addPerson,t=e.newName,r=e.handleNewNameChange,o=e.newNum,c=e.handleNewNumChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:t,onChange:r})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:o,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.name,t=e.number;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Contact: ",n," tel. ",t))},m=function(e){var n=e.persons,t=e.handleDelPerson;return a.a.createElement("div",null,n&&n.map((function(e){return a.a.createElement("div",{key:e.id+"d"},a.a.createElement(d,{key:e.id+"p",name:e.name,number:e.number}),a.a.createElement("button",{key:e.id+"b",onClick:function(){return t(e.id)}},"del"))})))},s=function(e){var n=e.filter,t=e.handleFilterChange;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:n,onChange:t}))},f=t(3),h=t.n(f),b="/api/persons",g=function(){return h.a.get(b).then((function(e){return e.data}))},p=function(e){return h.a.post(b,e).then((function(e){return e.data}))},E=function(e){var n="".concat(b,"/").concat(e.id);return console.log("Put URL",n),h.a.put(n,e).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},w=function(e){var n=Object(r.useState)(!1),t=Object(l.a)(n,2),o=t[0],c=t[1];return Object(r.useEffect)((function(){c(!0),setTimeout((function(){c(!1)}),3e3)}),[e.text,e.isError]),o?a.a.createElement("div",{style:e.isError?{margin:10,borderStyle:"solid",borderColor:"red",borderWidth:10,borderRadius:5,padding:10,backgroundColor:"yellow",color:"green"}:{margin:10,borderStyle:"solid",borderColor:"green",borderWidth:10,borderRadius:5,padding:10,backgroundColor:"yellow",color:"green"}},a.a.createElement("p",null,e.text)):null},C=function(){var e=Object(r.useState)([{name:"Tero Testiheppu",number:"007-176761",id:1}]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),d=Object(l.a)(c,2),f=d[0],h=d[1],b=Object(r.useState)(""),C=Object(l.a)(b,2),j=C[0],O=C[1],N=Object(r.useState)(""),k=Object(l.a)(N,2),y=k[0],P=k[1],S=Object(r.useState)(null),x=Object(l.a)(S,2),D=x[0],A=x[1],F=function(){g().then((function(e){console.log("Got phonebook!"),o(e)})).catch((function(e){return console.log("No phonebook: ",e.message)}))};Object(r.useEffect)(F,[]);var L=function(e){A({text:e,isError:!1})},R=function(e){A({text:e,isError:!0})},T=function(e){return t.find((function(n){return n.id===e}))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),D&&a.a.createElement(w,{text:D.text,isError:D.isError}),a.a.createElement(s,{filter:f,handleFilterChange:function(e){h(e.target.value)}}),a.a.createElement("h3",null,"Add a new contact"),a.a.createElement(i,{addPerson:function(e){e.preventDefault();var n,r=(n=j,t.find((function(e){return e.name===n})));if(void 0!==r&&window.confirm("".concat(j," is already in phonebook, update number?"))){var a=Object(u.a)(Object(u.a)({},r),{},{number:y});E(a).then((function(e){o(t.map((function(e){return e.id===a.id?a:e}))),O(""),P(""),L("Updated contact: "+a.name+" with new number: "+y),console.log("Updated contact:",a.name,y)})).catch((function(e){var n=e.message;console.log("Problem in updating person: ",n),R("Number ".concat(y," too short (should be 8 digits or more), or person no longer found!")),F()}))}else{var c={name:j,number:y};p(c).then((function(){F(),O(""),P(""),console.log("Added person!",c.name),L("Added person: "+c.name)})).catch((function(e){var n=e.message;console.log("Problem creating a contact: ",n),R("Check: min phone number length is 8 and name lenght 3!")}))}},newName:j,handleNewNameChange:function(e){O(e.target.value)},newNum:y,handleNewNumChange:function(e){P(e.target.value)}}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(m,{persons:function(e,n){return n?n.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())})):null}(f,t),handleDelPerson:function(e){console.log("Deleting person with id ",e),window.confirm("Delete ".concat(T(e).name,"?"))&&v(e).then((function(){var n=t.filter((function(n){return n.id!==e}));o(n),L("Deleted person ".concat(T(e).name))})).catch((function(e){var n=e.message;console.log("Problem in deleting a person: ",n),R("Person no longer found!"),F()}))}}))};c.a.render(a.a.createElement(C,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2f14133c.chunk.js.map